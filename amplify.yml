version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "VITE_API_BASE_URL=https://tech-blog-backend-production.up.railway.app/posts" >> .env
        - echo "VITE_API_BASE_USER_URL=https://tech-blog-backend-production.up.railway.app/users" >> .env
        - echo "VITE_GISCUS_REPO=trulyepic/tech-blog-ui" >> .env
        - echo "VITE_GISCUS_REPO_ID=R_kgDOOSZizw" >> .env
        - echo "VITE_GISCUS_CATEGORY=General" >> .env
        - echo "VITE_GISCUS_CATEGORY_ID=DIC_kwDOOSZiz84Corp-" >> .env
    build:
      commands:
        - npm install
        - npm run build
  artifacts:
    baseDirectory: build
    files:
      - "**/*"
      - public/sitemap.xml
      - public/robots.txt
  cache:
    paths:
      - node_modules/**/*
